<!DOCTYPE html>
<html>
<head>
<title>basic :: JavaScript example</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,700">
<!-- 100 / 300 / 400 / 500 / 700 / 900 -->
<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosanskr.css">
<link rel="stylesheet" href="css/reset.css">
<style>
body {
	font-family: "Roboto", "Noto Sans KR", sans-serif;
	font-size: 1em;
	font-weight: 400;
}

/* header */
#header {
	height: 900px;
	overflow: hidden;
	background-color: #bbdaff;
}
#header > div {
	margin: 50px 20px;
	padding: 10px;
	float: left;
	width: 300px;
	height: 300px;
	font-size: 14px;
	border: 1px solid #000;
	opacity: 0;
	box-sizing: border-box;
	transform: translateY(100px);
	transition: all 0.4s;
}
#header.active > div {
	transform: translateY(0);
	opacity: 1;
}
#header .type1 {
	transition-delay: 0;
}
#header .type2 {
	transition-delay: 0.5s;
}
#header .type3 {
	transition-delay: 1s;
}

/* page1 */
#page1 {
	height: 900px;
	overflow: hidden;
	background-color: #cafeb8;
}
#page1 > div {
	margin: 50px 20px;
	padding: 10px;
	float: left;
	width: 300px;
	height: 300px;
	font-size: 14px;
	border: 1px solid #000;
	opacity: 0;
	box-sizing: border-box;
	transform: translateY(100px);
	transition: all 0.4s;
}
#page1.active > div {
	transform: translateY(0);
	opacity: 1;
}
#page1 .type1 {
	transition-delay: 0;
}
#page1 .type2 {
	transition-delay: 0.5s;
}
#page1 .type3 {
	transition-delay: 1s;
}

/* page2 */
#page2 {
	height: 900px;
	overflow: hidden;
	background-color: #ffe099;
}
#page2 > div {
	margin: 50px 20px;
	padding: 10px;
	float: left;
	width: 300px;
	height: 300px;
	font-size: 14px;
	border: 1px solid #000;
	opacity: 0;
	box-sizing: border-box;
	transform: translateY(100px);
	transition: all 0.4s;
}
#page2.active > div {
	opacity: 1;
	transform: translateY(0);
}
#page2 .type1 {
	transition-delay: 0;
}
#page2 .type2 {
	transition-delay: 0.5s;
}
#page2 .type3 {
	transition-delay: 1s;
}
</style>
<script>
/*
window.addEventListener("load", function(){
	var wrapper=document.getElementsByClassName("wrapper")[0];
	var contents=wrapper.children;
	var t=window.pageYOffset; // 윈도우 상단 위치 변수입니다.
	// console.log("t : "+t);
	var offsety=[]; // 위치 이동 배열입니다.
	var n=0; // 카테고리 번호 변수입니다.

	for(var i=0; i<contents.length; i++){
		offsety.push(contents[i].offsetTop);
	}
	// console.log("offsety : "+offsety.join(", "));

	// var num=-20;
	// console.log("Math.abs(num) : "+Math.abs(num));
	contents[n].classList.add("active");

	// console.log("document.body.clientHeight : "+document.body.clientHeight); // 웹 문서의 세로 크기입니다.
	// console.log("window.innerHeight : "+window.innerHeight); // 윈도우의 세로 크기입니다.

	window.addEventListener("scroll", function(){
		t=window.pageYOffset;
		// console.log("t : "+t);

		if(t < offsety[1]){
			n=0;
		}
		else if(t < offsety[2]){
			n=1;

			if(t == (document.body.clientHeight-window.innerHeight)){
				n=2;
			}
		}
		else{
			n=2;
		}
		// console.log("n : "+n);

		for(var j=0; j<contents.length; j++){
			if(j == n){
				contents[j].classList.add("active");
			}
			else{
				contents[j].classList.remove("active");
			}
		}
	});
});
*/

/*
window.addEventListener("load", function(){
	var wrapper=document.getElementsByClassName("wrapper")[0];
	var contents=wrapper.children;
	var t=window.pageYOffset;
	var offsety=[];
	var n=0;

	for(var i=0; i<contents.length; i++){
		offsety.push(contents[i].offsetTop);
	}

	contents[n].classList.add("active");
	window.addEventListener("scroll", scrollHandler); // changed

	function scrollHandler(){ // changed
		t=window.pageYOffset;
		// console.log("t : "+t);

		if(t < offsety[1]){
			n=0;
		}
		else if(t < offsety[2]){
			n=1;

			if(t == (document.body.clientHeight-window.innerHeight)){
				n=2;
			}
		}
		else{
			n=2;
		}

		for(var j=0; j<contents.length; j++){
			if(j == n){
				contents[j].classList.add("active");
			}
		}

		if(n == 2){
			window.removeEventListener("scroll", scrollHandler);
		}
	}
});
*/

window.addEventListener("load", function(){
	var wrapper=document.getElementsByClassName("wrapper")[0];
	var contents=wrapper.children;
	var t=window.pageYOffset;
	var offsety=[];
	var n=0;

	for(var i=0; i<contents.length; i++){
		offsety.push(contents[i].offsetTop);
	}

	contents[n].classList.add("active");
	window.addEventListener("scroll", scrollHandler);

	function scrollHandler(){
		var timer=setTimeout(function(){ // changed
			clearInterval(timer);
			t=window.pageYOffset;
			// console.log("t : "+t);

			if(t < offsety[1]){
				n=0;
			}
			else if(t < offsety[2]){
				n=1;

				if(t == (document.body.clientHeight-window.innerHeight)){
					n=2;
				}
			}
			else{
				n=2;
			}

			for(var j=0; j<contents.length; j++){
				if(j == n){
					contents[j].classList.add("active");
				}
			}

			if(n == 2){
				window.removeEventListener("scroll", scrollHandler);
			}
		}, 10);
	}
});
</script>
</head>

<body>
<div class="wrapper">
	<header id="header">
		<div class="type1">type1</div>
		<div class="type2">type2</div>
		<div class="type3">type3</div>
	</header>
	<section id="page1">
		<div class="type1">type1</div>
		<div class="type2">type2</div>
		<div class="type3">type3</div>
	</section>
	<section id="page2">
		<div class="type1">type1</div>
		<div class="type2">type2</div>
		<div class="type3">type3</div>
	</section>
</div>
</body>
</html>